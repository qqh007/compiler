这两个要生成中间代码吗？可以不写的

常量说明、

变量说明、



简单：

读语句、

写语句、

主要涉及到表达式的四元式：

赋值语句，

里面什么都有，主要涉及参数怎么用，还有返回值等：

无函数定义及调用，

(无数组声明及引用)





生成四元式 Intermediate code

根据四元式生成mips代码





需要有标签：

跳转的label

字符串 .asciiz

分配的地址空间，这里应该只有数组



现在只需要写字符串的 str1,str2...



读语句、：

读int或c

写语句、

输出 char或int或str，

只有输出表达式麻烦一点



常量说明、

变量说明、

简单的生明并且入栈



赋值语句，

一堆的四元式运算表达式，可能需要逆波兰式



无函数定义及调用，

需要确定函数参数，然后生成标签，然后返回即 jr





还有一些小问题：

数组的地址空间

函数



全局变量直接在符号表

所有的局部变量需要用根据名字用map存起来





表达式：

a\*b\*c+...e\*f\*g

t1=a*b

t2=t1*c





表达式有多个相加的

a+b+c

t1=a+b

t2=t1+c



得到的是最终的t2表达式





＜因子＞  = ＜标识符＞｜'('＜表达式＞')'｜＜整数＞|＜字符＞｜＜有返回值函数调用语句＞     

标识符，整数，字符，直接返回就好了

表达式的，还需要返回表达式

有返回函数调用，这个也得变成string的传递参数





常量直接优化成值

变量需要一个地址空间offset





全局变量和函数不需要分配offset，直接在生产代码的时候-value即可

局部变量需要在语法分析时，根据已经生成的变量个数，分配offset的大小

生成的tmp也算是局部变量，需要记录在符号表中并分配offset

函数参数也算是局部变量，

当一个函数返回了，那么属于他的域的offset就结束了，于是需要reset offset







先生成全局变量

再生成局部变量，这里的局部变量甚至不需要清除和变化

然后生成所有的字符串





const类型，直接替换成数字运算



用的寄存器t0,t1,t2

全局变量的类型:



局部变量的类型: