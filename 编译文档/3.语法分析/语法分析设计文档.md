### 语法分析设计文档

> 18343441
>
> 覃启浩

#### 题目要求

​		根据给定的文法设计并实现语法分析程序，能基于上次作业的词法分析程序所识别出的单词，识别出各类语法成分。

#### 设计思路

​		在编译原理课上，我学到了**递归下降**的分析方法，对每个非终结成分都编写出一个子程序，来该成分所对应的语法分析的分析和识别成分。编成递归子程序的原因是，文法是具有递归性的。

​		具体到**代码实现**上时，就是每次读取一个单词，然后根据预读到的单词进行下一步或者进入子程序，用if语句while语句来控制。我使用了一个数组来存储所有的单词来预读以解决回溯问题，甚至如果预读1个不能解决那就预读更多个来解决，根据预读到的单词判断应该进入哪个子程序中分析。

#### 重点难点

​		这次实验思路上并不是特别难，通篇的难点在于**繁琐的细节**和过多的语法成分子程序。这次实验我花了18个小时左右，其中有一半的时间是花在子程序的debug上的。

​		第一个需要解决的问题是如何**预读**。最初我是一边从文件中读取单词，一边分析单词同时根据已经读到的单词分析语法，这样做的问题是如果不确定子程序是什么，就需要预读，而预读就需要进行词法分析，词法分析就会输出读到的单词，这还没开始分析单词就输出了肯定不行。于是我建了一个类来存储分析到的单词，同时建了一个数组存储类，语法分析时想怎么预读就怎么预读，非常方便。

​		第二个问题是某一些可以为**空的子程序**带来的问题。可以为空的子程序与其他程序不同，如果为空，那么就需要判断为空的条件也就是下一个单词是什么（大多为')'和'}'），而且这个子程序不能像其他程序一样读取下一个单词，因为下一个单词不是它的，而是它的上层程序的，上层程序需要这个下一个单词来判断程序是否正确。这个问题是我到最后才弄清楚的。

#### 不足之处

​		**冗长的代码**。这次代码语法分析这块我写了将近1300行代码，其中有很多是相似的代码段，考虑到后面可能会有不同的需求，我没有用宏来整理这些相似甚至相同的代码段。还有就是我用到了很多的if else嵌套结构，显得有点混乱，影响我的思路，或许我还能再优化一下。

​		**优化不足**。我现在并没有考虑任何有关优化的事，做的只是为了能把能通过测试，这样有好处也有坏处，好处是不用想太多，坏处是后期优化起来可能会比较不方便。

​		**对c++不熟悉**。说实话这是我第一次真正拿c++编程，我对很多用法对不太熟悉，可能错过了更好的写法和更优的解法，但是目前也就这样吧，我只要在学习中进步就行了。



#### 总结

​	总的来说，这次实验花了我挺多精力的，不是说它难以理解，而是繁复冗杂，最后花了我很多时间。这就才只是第三次实验，我觉得我还有很长的路要走，后面花的时间可能会更多，且行且看吧，加油。